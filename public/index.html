<!DOCTYPE html>
<html>
<title>ember</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<style>
.button1{
  width:180px;
  color: #fff!important;  
  cursor: pointer;
}
#createRoomBtn {  
  background-color: #f44336!important;  
}
#gotoRoomBtn {  
  background-color: #044336!important;  
  display: none;
}
.container{
  margin-left: 20px;
}
#guestPlayerUrl{
  margin-top: 20px;
}
</style>
<script type="text/javascript" src="js/jquery-2.0.3.min.js"></script>
<body>

<div class="container">
  <h2>ember Neon pong game</h2>
  
  <div><button class = 'button1' id="createRoomBtn">Create Game Room</button></div>  
  <div><button class = 'button1'  id="gotoRoomBtn">Go to Game Room</button></div> 
  <div id='guestPlayerUrl'></div>    
</div>
<script type="text/javascript">
  $( document ).ready(function() { 
    var linkUrl = 'http://localhost:3000/'
    var roomID;
    const socket = io.connect("http://localhost:3000");
    socket.emit("joined");
    $("#createRoomBtn").click(function(){
      var dataObj = {user1:'user1', user1Email:'user1@abc.com',user2:'user2', user2Email:'user2@abc.com',gameId:1};
      socket.emit("createRoom", dataObj);
    });
    socket.on("roomCreated", (data) => {
      roomID = data;
      console.log('roomCreated', roomID)
      $("#createRoomBtn").css('display','none');
      $("#gotoRoomBtn").css('display','block');
      var navUrl = linkUrl + 'game.html?user=user2&email=user2@abc.com&roomid=' + roomID + '&gameId=1'
      $("#guestPlayerUrl").html('Please share this url to invite a friend to play: '+ navUrl +'<span style="margin-left:20px;"><a href="' + navUrl + '" target="_blank">Click here to join as another player</a></span>');
    });
    $("#gotoRoomBtn").click(function(){
      var win = window.open(linkUrl +'game.html?user=user1&email=user1@abc.com&roomid=' + roomID + '&gameId=1', '_blank');
        if(win){            
            win.focus();
        }else{            
            alert('Please allow popups for this website');
        }

    });
  });

</script>
<script src="/socket.io/socket.io.js"></script>
</body>
</html>
